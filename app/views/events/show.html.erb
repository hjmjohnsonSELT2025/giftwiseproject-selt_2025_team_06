<div class="event-wrapper">
  <div class="event-card">

    <h1>View Event</h1>

    <% if flash[:alert] %>
      <p class="alert"><%= flash[:alert] %></p>
    <% elsif flash[:notice] %>
      <p class="notice"><%= flash[:notice] %></p>
    <% end %>

    <div>
      <%= link_to "Back to All Events", events_path, class: "btn btn-default" %>
    </div>

    <div class="event-detail">
      <p><strong>Date:</strong> <%= @event.event_date %></p>
      <p><strong>Location:</strong> <%= @event.location %></p>
      <p><strong>Budget:</strong> <%= @event.budget %></p>
      <p><strong>Theme:</strong> <%= @event.theme %></p>
    </div>

    <h2>Attendees</h2>

    <div class="attendee-list-scroll">
      <ul class="attendee-list">
        <% @event.invites.each do |invite| %>
          <% attendee = invite.user %>

          <li id="attendee-<%= attendee.username %>" class="attendee-item">
            <span><%= attendee.username %></span>

            <% if current_user.id == @event.user_id %>
              <%= button_to "Remove",
                            remove_attendee_event_path(@event, user_id: attendee.id),
                            method: :delete,
                            class: "remove-attendee-button" %>
            <% end %>
          </li>
        <% end %>

        <% if @event.invites.empty? %>
          <li>No attendees yet.</li>
        <% end %>
      </ul>
    </div>

    <div class="invite-container">
      <h3>Invite a User</h3>
      <%= form_tag invite_event_path(@event), method: :post, class: "invite-form" do %>
        <input type="text"
               name="username"
               placeholder="Enter username..."
               class="invite-input" />
        <button type="submit" class="invite-button">Invite</button>
      <% end %>
    </div>

  </div>
</div>
